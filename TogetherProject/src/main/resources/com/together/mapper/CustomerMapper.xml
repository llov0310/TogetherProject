<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.together.mapper.CustomerMapper">

	<!--  select시 셀렉트문  insert시 태그를 각자 맞는 sql문을 쓴다 -->
	
	<!-- login sql 추가 -->
	<select id="login" resultType="com.together.domain.MemberVO">
		select * from member where user_id = #{user_id} and password = #{password}
	</select>

	<insert id="signup" parameterType="com.together.domain.MemberVO">
		insert into member values 
		(#{user_id},#{password},#{ph_no},#{email},#{user_nm},sysdate,'3',#{birth_dt},MEMBER_SEQ.nextval,#{addr_ji},#{addr_dong})
	</insert>
	
	<select id="list" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise 
		where (etp_addr = #{address_total} 
		and
		etp_cd like '%'||'h'||'%')
	</select>
	
	
	<select id="ser" resultType="com.together.domain.EnterpriseVO">
		select * from 
		member c ,enterprise a, enterprise_info b 
		where
		a.etp_cd = b.etp_cd 
		and 
		c.user_id = a.user_id 
		and 
		a.etp_addr like '%'||#{toAddress}||'%'
		and
		c.authority_no = 2
	</select>
	
	
	<select id="info" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise a, enterprise_info  b, member c
		where a.etp_cd = b.etp_cd and c.user_id = a.user_id and b.etp_cd = #{test}
	</select>
	
	<select id="textbox" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise a , enterprise_info b 
		where a.etp_cd = b.etp_cd and a.user_id = #{sess}
	</select>
	
	
	<update id="update" parameterType = "com.together.domain.EnterpriseVO">
		update enterprise set etp_email = #{etp_email},
		etp_addr = #{etp_addr},
		etp_ph_no = #{etp_ph_no},
		etp_license_no = #{etp_license_no},
		etp_nm = #{etp_nm}
		where etp_cd = #{etp_cd}
		
	</update>
	<update id="update2" parameterType="com.together.domain.EnterpriseVO">
		update enterprise_info set etp_if_info = #{etp_if_info},
		etp_if_intro = #{etp_if_intro},
		etp_if_time1 = #{time1},
		etp_if_time2 = #{time2}
		where etp_cd = #{etp_cd}
	</update>
	
	<select id="info_select" resultType="com.together.domain.EnterpriseVO">
	select *from member a, enterprise b 
	where a.user_id = b.user_id and b.user_id = #{user_id}
	</select> 
	
	<insert id="ent_info" parameterType="com.together.domain.EnterpriseInfoVO">
		insert into enterprise_info(etp_if_cd,etp_cd) values (ENTINFO_SEQ.nextval,#{code})		
	</insert>
	
	<select id="product_select" resultType="com.together.domain.ProductVO">
		select * from product where etp_cd = #{code}
	</select>
	
	<delete id="del" parameterType="com.together.domain.ProductVO">
	delete from product where etp_cd = #{code} and pd_nm = #{nm}
	</delete>
	
	<insert id="insert_product" parameterType="com.together.domain.ProductVO">
		insert into product values (PRODUCT_SEQ.nextval,#{code},#{pd_nm},#{pd_price},#{pd_content},null)
	</insert>
	
	<select id="getList" resultType="com.together.domain.ProductVO">
		select * from product where etp_cd = #{code}
	</select>
	
</mapper>