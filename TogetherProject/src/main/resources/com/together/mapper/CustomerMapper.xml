<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.together.mapper.CustomerMapper">

	<!--  select시 셀렉트문  insert시 태그를 각자 맞는 sql문을 쓴다 -->
	
	<!-- login sql 추가 -->
	<select id="login" resultType="com.together.domain.MemberVO">
		select * from member where user_id = #{user_id} and password = #{password}
	</select>

	<insert id="signup" parameterType="com.together.domain.MemberVO">
		insert into member values 
		(#{user_id},#{password},#{ph_no},#{email},#{user_nm},sysdate,'3',#{birth_dt},MEMBER_SEQ.nextval,#{addr_ji},#{addr_dong})
	</insert>
	
	<select id="list" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise 
		where (etp_addr = #{address_total} 
		and
		etp_cd like '%'||'h'||'%')
	</select>
	
	
	<select id="ser" resultType="com.together.domain.EnterpriseVO">
		select * from 
		member c ,enterprise a, enterprise_info b 
		where
		a.etp_cd = b.etp_cd 
		and 
		c.user_id = a.user_id 
		and 
		a.etp_addr like '%'||#{toAddress}||'%'
		and
		c.authority_no = 2
	</select>
	
	
	<select id="info" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise a, enterprise_info  b, member c
		where a.etp_cd = b.etp_cd and c.user_id = a.user_id and b.etp_cd = #{test}
	</select>
	
	<select id="textbox" resultType="com.together.domain.EnterpriseVO">
		select * from enterprise a , enterprise_info b 
		where a.etp_cd = b.etp_cd and a.user_id = #{sess}
	</select>
	
	
	
	<insert id="ent_info" parameterType="com.together.domain.EnterpriseInfoVO">
		insert into enterprise_info(etp_if_cd,etp_cd) values (ENTINFO_SEQ.nextval,#{code})		
	</insert>
	
	
	
	<select id="getList" resultType="com.together.domain.ProductVO">
		select * from product where etp_cd = #{code}
	</select>
	
	<select id="getcd" resultType="com.together.domain.EnterpriseVO">
	select * from Product where etp_cd = #{code} and pd_nm = #{name}
	</select>
	
	<insert id="insert_order" parameterType="com.together.domain.OrdersVO">
	insert into orders(or_cd, user_id, pd_cd, or_dt, or_dt2, th_dt, or_stat, or_check, or_price)
 	values(ORDER_SEQ.nextval,#{user},#{pdcode},to_timestamp(#{first}),to_timestamp(#{last}),sysdate,'1','1',#{price})
	</insert>
	
</mapper>