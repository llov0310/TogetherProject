<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.together.mapper.AdminMapper">

	<!--  select시 셀렉트문  insert시 태그를 각자 맞는 sql문을 쓴다 -->
	
	<!-- customerManage페이지에 갔을 때 회원 목록을 보여주는 sql문 추가 -->
	<select id="getMemberList" resultType="com.together.domain.MemberVO">
	select user_id, email, user_nm, authority_no, ph_no, register_dt, addr_ji, addr_dong
	from member
	where authority_no = 2 or authority_no = 3
	</select>
	 
	<!--  enterpriseManage페이지에 갔을 때 업체 신청 리스트를 보기 위한 sql문 추가-->
	<select id="getEnterpriseList" resultType="com.together.domain.EnterpriseVO">
	select m.user_nm, m.authority_no, e.etp_email, e.user_id, e.etp_addr, e.etp_ph_no, e.etp_license_no, e.etp_nm, e.etp_content
	from member m, enterprise e
	where m.user_id = e.user_id and m.authority_no = 3
	</select>
	
	<!-- dogsManage페이지에 갔을 때 반려견 리스트 보기 위한 sql문 추가 -->
	<select id="getDogsList" resultType="com.together.domain.DogsVO">
	select d.user_id, m.user_nm, m.ph_no, d.d_gender, d.d_dt, d.d_addr, d.d_kind, d.d_nm, d.d_content
	from dogs d, member m
	where d.user_id = m.user_id
	</select>
	
	<select id="getETPApplyList" resultType="com.together.domain.MemberVO">
	select authority_no
	from member
	where user_id = #{user_id}
	</select>
	
	
	<!-- 관리자가 업체 신청 수락시 수행될 sql문 추가 -->
	<update id="etpApplyManage_01" parameterType="com.together.domain.MemberVO">
	update member
	set authority_no = 2
	where user_id = #{user_id}
	</update>
	
	<!-- 관리자가 업체 신청 거절시 수행될 sql문 추가 -->
	<delete id="etpApplyManage_02" parameterType="com.together.domain.EnterpriseVO">
	delete from enterprise
	where user_id = #{user_id}
	</delete>
</mapper>